<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="/css/style.css" rel="stylesheet" />
  <link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.3/mapbox.css' rel='stylesheet' />
  <title>Data Visualization Capstone</title>
</head>

<body class="loading">
  <div class='row'>
    <div class='small-12 columns'>
      <h2>Boston</h2>
    </div>
  </div>
  <div class='row' data-equalizer style='height:100%;'>
    <div class='small-12 medium-4 large-3 columns' data-equalizer-watch>
        <h2>Bedrooms</h2>
        <h2>Date</h2>
    </div>
    <div id='map' class='small-12 medium-8 large-9 columns' data-equalizer-watch>
    </div>
  </div>

  <div id='loading'></div>

  <!-- Custom -->
  <script src="js/app.js"></script>
  <script src="js/sample-data.js"></script>

  <!-- External -->
  <script src="https://api.tiles.mapbox.com/mapbox.js/v1.6.3/mapbox.js"></script>

  <script src='js/heatmap/webgl-heatmap.js'></script>
  <script src='js/heatmap/webgl-heatmap-leaflet.js'></script>

  <script src='js/heatmap/leaflet-d3.js'></script>
  <script src='js/heatmap/hexbin.js'></script>

  <script>
   $(document).foundation()
  </script>

  <script>

    /************************************
         Data Visualization Settings
     ************************************/

    // Map settings
    var options = {

      // Mapbox's style key for applying map designs
      map_key: "stephalee.aec4ccea",

      // Define default map viewport: Top left & bottom right coordinates
      viewport: [
        [42.329077, -71.108871],
        [42.374200, -71.032072]
      ],

      // Active data filters
      filters: {

        // Oldest plotted point
        startdate: null,

        // Most recent plotted point
        enddate: null,

      },

      // Support multiple layers of data representation.
      // Useful for building correlations between data sets.
      layers : [],

    }

    /************************************
         Add Default Data
     ************************************/

    options.layers.push({

      // Set name for layer
      name : "Apartments",

      // Define representation of layer
      type: "scatterplot",

      // Data from sample-data.js
  		data : sample_data.apartments,

  		// Pixel width of scatterplot points
  		width: 1,

      color : "#000",
  	});

    options.layers.push({

      // Set name for layer
      name : "Orange Line",

      // Define representation of layer
      type: "path",

      // Data from sample-data.js
      data : sample_data.subway.orange,

      // Pixel width of scatterplot points
      width: 2,

      color: "#ffa500",
    });

    options.layers.push({

      // Set name for layer
      name : "Red Line",

      // Define representation of layer
      type: "path",

      // Data from sample-data.js
      data : sample_data.subway.red,

      // Pixel width of scatterplot points
      width: 2,

      color: "#ff0000",
    });

	  options.layers.push({

        // Set name for layer
        name : "Rent Prices",

        // Define representation of layer
        type : "heatmap",

        // Data from sample-data.js
        data : sample_data.apartments,
  	});

    /************************************
         Initialize Map
     ************************************/

    // Global variable for map object
    // Initialize Leaflet map
    var leaflet_map = L.mapbox.map('map', options.map_key).fitBounds(options.viewport);

    // Add layers when the map is ready.
    leaflet_map.on('ready', function(){
      addLayers(options.layers);

      console.log("ACTIVE LAYERS");
      console.log(options.layers);
    })

    // Re-add layers when the map has changed.
    leaflet_map.on('viewreset', function(){
      console.log("\nView Reset: Replotting Layers");
      addLayers(options.layers);
    })

    // leaflet_map.on('moveend', function(){
    //   console.log("moveend");
    // })


  </script>
</body>

</html>









