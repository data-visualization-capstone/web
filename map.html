<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="/css/styles.css" rel="stylesheet" />
  <link href="/css/map.css" rel="stylesheet" />
<<<<<<< HEAD
  <link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.3/mapbox.css' rel='stylesheet' />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="js/app.js"></script>
=======
  <link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.3/mapbox.css' rel='stylesheet' />  
>>>>>>> development
</head>
<body class="loading">
  
  <!-- Leaflet.js map -->
  <div id='map'></div>

  <!-- Menu -->

  <div id='selections' class="selections">
    <div class='content'>
      
      <!-- Select Data Sets -->

      <div id="toggles"></div>
      <a href="#" id="toggleConnections">Toggle Connections</a>

      <!-- Filter Data -->

      <label>Filter By:</label>
      <select id="month">
        <option>All Months</option>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
        <option>6</option>
        <option>7</option>
        <option>8</option>
        <option>9</option>
        <option>10</option>
        <option>11</option>
        <option>12</option>
      </select>
      <select id="day">
        <option>All Days</option>
      </select>
      <div>
        <button id="dateFilter">Filter</button>
        <button onclick="clearFilter()">Clear Filter</button>
      </div>
    </div>
  </div>

  <div id='loading'></div>

  <script src="https://api.tiles.mapbox.com/mapbox.js/v1.6.3/mapbox.js"></script>


  <script>

    /****************************
            Settings
     ****************************/
    
    var showConnections = false; // Show travel paths
    var mapKey = "stephalee.aec4ccea";
    // var mapKey = 'alexjohnson505.k2pknn10'

    /****************************
            Initialize
     ****************************/

    // Load location data.
    loadData(function(data){

      // Initialize Leaflet map
      map = L.mapbox.map('map', mapKey).fitBounds([[42.329077, -71.108871], [42.374200, -71.032072]]);
      
      // Render points on graph
      var data = formatData(data, "time");
      drawPoints(map, data);
    })

    /****************************
            Interaction
     ****************************/    

    // Show/Hide sequential lines
    $("#toggleConnections").click(function(){
      showConnections = !showConnections;
      d3.selectAll("line").style("opacity", showConnections ? 1 : 0);
    });

    /******************************
             Watchers
     ******************************/

    $("#month").change(function(){
      makeDays($("#month").val());
    });

    $("#dateFilter").click(function(){
      filter($("#month").val(), $("#day").val());
    });



  </script>
</body>
</html>
